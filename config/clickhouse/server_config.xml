<?xml version="1.0"?>
<clickhouse>
  <!-- Donâ€™t override the base config; add via config.d -->
  <listen_host>0.0.0.0</listen_host>

  <!-- Macros are read from env vars -->
  <macros>
    <shard from_env="CLICKHOUSE_MACROS_SHARD" />
    <replica from_env="CLICKHOUSE_MACROS_REPLICA" />
  </macros>

  <!-- Keeper/ZooKeeper endpoint -->
  <zookeeper>
    <node>
      <host>clickhouse-keeper</host>
      <port>9181</port>
    </node>
  </zookeeper>

  <!-- DDL queue path (per shard) -->
  <distributed_ddl>
    <path>/clickhouse/tables/{shard}/ddl_queue</path>
  </distributed_ddl>

  <!-- Cluster topology lives in metrika.xml -->
  <include_from>/etc/clickhouse-server/config.d/metrika.xml</include_from>
</clickhouse>
